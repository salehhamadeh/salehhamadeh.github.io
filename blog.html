<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Saleh Hamadeh's Blog</title>
        <meta name="description" content="Saleh Hamadeh's official blog. I write about technology, programming, hacks, and my personal life." />
        <meta name="author" content="Saleh Hamadeh" />
        <meta name="keywords" content="Saleh Hamadeh, Blog, Technology, Programming" />

        <meta name="viewport" content="width=device-width">

        <!-- RSS -->
        <link rel="alternate" type="application/rss+xml" title="Saleh Hamadeh's Blog" href="http://www.shamadeh.com/blog/feed.xml">

        <!-- jQuery (necessary for Bootstrap's JavaScript plugins and for endpage-box) -->
        <script src="https://code.jquery.com/jquery.js"></script>
        <!-- Twitter Bootstrap -->
        <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
        <!-- Font Awesome -->
        <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        <!-- AddThis Smart Layers BEGIN -->
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51fee1032ce6a513"></script>
        <script type="text/javascript">
          addthis.layers({
            'theme' : 'transparent',
            'share' : {
              'position' : 'left',
              'numPreferredServices' : 5
            }   
          });
        </script>
        <!-- AddThis Smart Layers END -->
        
          <!-- Mailchimp Styles -->
          <link href="//cdn-images.mailchimp.com/embedcode/classic-081711.css" rel="stylesheet" type="text/css">
          <style type="text/css">
            #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
          </style>
        

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/stylesheets/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/stylesheets/style.css">

        <!-- Related article box code -->
        
    </head>
    <body>
      <div id="wrap">
        <div class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div class="navbar-collapse collapse" id="navbar-main">
      <ul class="nav navbar-nav">
        <li>
          <a href="/index.html">About Me</a>
        </li>
        <li>
          <a href="/projects.html">Projects</a>
        </li>
        <li class="active">
          <a href="/blog.html">Blog</a>
        </li>
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://www.facebook.com/salehhamadeh" target="_blank"><i class="fa fa-facebook fa-lg"></i><span class="sr-only">Facebook Profile</span></a></li>
        <li><a href="https://twitter.com/salehhamadeh" target="_blank"><i class="fa fa-twitter fa-lg"></i><span class="sr-only">Twitter Profile</span></a></li>
        <li><a href="https://github.com/salehhamadeh" target="_blank"><i class="fa fa-github fa-lg"></i><span class="sr-only">Github Profile</span></a></li>
        <li><a href="http://www.linkedin.com/pub/saleh-hamadeh/62/8b6/2a2" target="_blank"><i class="fa fa-linkedin fa-lg"></i><span class="sr-only">LinkedIn Profile</span></a></li>
      </ul>
    </div>
  </div>
</div>

        <div class="container">
          <div class="row">
            <h1>Saleh Hamadeh's Blog</h1>
            <div class="col-md-8 col-md-offset-1">
              
  
  <div class='post'>
    <span class='date'>06 Sep 2014</span>
    <h1><a href='/blog/programming/2014/09/06/AgileAndSoftwareDevelopers.html'>How Agile Changed the Software Workplace</a></h1>
    <div class='body'><p>In the last three decades, software development has undergone a drastic change. Computer science started out as a mix of discrete mathematics and electrical engineering. As more people bought personal computers, most businesses sold their software for fixed prices. Nowadays, businesses are more user-oriented than product-oriented, and most of them depend on a steady flow of income, such as a subscription fees, rather than a fixed price. Throughout the proccess, offices transitioned from cubicles to open spaces, programmers from hobbyists to professionals, and products from executable programs to web applications. Two major changes fostered this transformation: Improved Connectivity and Easier Access to Data.</p>

<h2>Improved Connectivity</h2>

<p>Before the days of the World-Wide Web, software was shipped in the form of floppy disks. Since companies could not easily send updates to their users, the Waterfall Method emerged. The <a href="http://en.wikipedia.org/wiki/Waterfall_model">Waterfall Method</a> divides the software engineering process into the following stages:</p>

<p>1- Requirements Specification: Gather information from clients and understand the problem.
2- Design: Propose a solution and develop a model for construction.
3- Implementation: Develop the full application.
4- Verification: Customer uses the application and confirms that it works as expected.
5- Testing: Heavily test application.
6- Shipping: Customer uses or publishes his application.</p>

<p><img src="https://dl.dropboxusercontent.com/u/163831352/shamadeh.com%20assets/waterfall-comic.png" alt="Waterfall Method Comic"></p>

<p>When I first saw the photo above, I immediately thought that this comic was nonsense. In the couple of internships that I had, everyone on the team had a say on the project and met with the customers to define the products. I only understood the meaning of this comic when I had an interview at a company that showed me the cubicle that I will work in. It was dark and quiet, definitely not my kind.</p>

<p>The main reason companies were done that way was the low connectivity people had back in the day. When a company spots a bug after it delivered its product, it will need to send floppy disks with the patches to all the consumers who bought the original application. Releasing a newer version of an application was a process that took several months and had enormous costs.</p>

<p>As the Internet became widespread and connection speeds escalated, it became easier, faster, and cheaper for companies to release updates for their software. Programmers need no longer worry about all the edge cases and every single security loophole before releasing the application. As more bugs are discovered, the programmers fix them and publish the updates.</p>

<h2>Easier Access to Data</h2>

<p><a href="http://www.sas.com/en_us/insights/big-data/what-is-big-data.html">Big Data</a> is a controversial topic nowadays. Data is the premise of some of the booming information industries, such as business intelligence, marketing automation, and targeted adversing. What once required going to libraries and searching stacks of dusty books can now be done with a Google search.</p>

<p>One branch of data is feedback. Let&#39;s take mobile apps as an example scenario. When software companies release an app and publish it to the Google Play store or Apple App Store, they get instant feedback from the users. They know the user&#39;s demographics, ratings, and all other usage statistics. Back in the day, getting feedback took so much effort, and it did not provide data as valuable as what we can get nowadays. Interviewing a person for feedback or sending him a message is not the same as the user writing the feedback right after the user runs the app. During interviews, people are usually affected by the environment and the interviewer&#39;s personality.</p>

<p>If one user has a problem, then there are other users who have the same problem. Therefore, user suggestions help companies build software that appeals to the majority.</p>

<h2>The <a href="http://agilemethodology.org/">Agile Methodology</a> Emerges</h2>

<p>Soon enough, the world realized that the Waterfall Methodology no longer fits our era. The goal of the waterfall method was to get the application right the first time. That was a need because shipping or deploying software was a costly process. Now that deployments can be done in a matter of minutes or hours, the concept of continuous refinement started appearing. Not only can developers deploy apps quickly, but developers can also get instant feedback from their customers. Fast deployments and instant feedback are the foundation of the Agile Methodology. The general stages of the Agile software development stages are:</p>

<p>1- Design and implement a small set of features.
2- Publish the app.
3- Listen to user feedback.
4- Select new features based on user feedback and go back to step 1.</p>

<p><img src="https://dl.dropboxusercontent.com/u/163831352/shamadeh.com%20assets/agile-comic.png" alt="Agile Method Comic"></p>

<p>Unlike the Waterfall Method, the Agile Method is against writing a full-blown plan. Plans are based on estimations and hypotheses, which are incorrect most of the time. A customer may want an app for arranging parties at first, but then he realizes that he really wants a social network. To increase customer satisfaction, software developers do not ask for everything and then build the product. Instead, software developers work with the customer to build the product. At the same time, the customer is frequently presented with demos and is in track with the internal tasks for managing the project.</p>

<p>Although &quot;stop planning and start coding,&quot; works for some projects, the better solution is &quot;plan only for what you need at the moment.&quot;</p>

<h2>The Workplace Shift</h2>

<p>The history of software engineering is completely changing the way we view computer science. When I meet new people and tell them that I am studying computer science, they think that I will spend the rest of my life in a dark cubicle typing an endless stream of zeroes and ones. Most people, excuse me for generalizing, view computer programming as the job for people who do not like to engage with society. Although this notion may apply to the programmers of the 80&#39;s, I forcefully refute that this is the case nowadays. Agile is transforming the software development workplace. Programmers are becoming engineers, and open offices are replacing cubicle.</p>

<p>To get a better idea of what programmers or software developers do and how their workplace looks like, check out <a href="http://brainjocks.com/company">BrainJocks</a>, the company where I currently intern.</p>
</div>
  </div>
  

  
  <div class='post'>
    <span class='date'>20 Aug 2014</span>
    <h1><a href='/blog/life/2014/08/20/CULCOnAWednesdayMorning.html'>CULC on a Wednesday Morning</a></h1>
    <div class='body'><p>Now that two days of school have already passed, the students are starting to get back to the usual Techy routine. Some people are quiet, others are speaking in a low voice, and still others are falling. On the chair next to me, a Starbucks employee is snoring while holding a Starbucks coffee in her hand. Quite ironic, especially since it is 9:40 in the morning.</p>

<p>For the first time, I will include a photo in a blog post. The photo below is taken from the 2nd floor of the Clough Undergraduate Learning Center, which is also known as CULC. The space below is right in front of my Data Structures and Algorithms lecture class, which fits 200 people. The photo the before-class feeling of Georgia Tech students.</p>

<p><img src="https://dl.dropboxusercontent.com/u/163831352/shamadeh.com%20assets/20140820_092235%20(3).jpg" alt="CULC photo"></p>
</div>
  </div>
  

  
  <div class='post'>
    <span class='date'>18 Aug 2014</span>
    <h1><a href='/blog/life/2014/08/18/BackToTech.html'>Back to Tech</a></h1>
    <div class='body'><p>After a hell of a summer, life went back to its usual route. School starts today, and my first class starts after less than 30 minutes. This semester, I am fresher and more enthusiastic about school than I had ever been. The way I spent summer is the main reason I feel so energetic now.</p>

<p>Right after spring semester ended, I went on a short excursion to Florida with a couple of high school friends. Swimming at the crystal-clear Clearwater beach, running into the wild at Busch Gardens, and going back to childhood and Disney World brought back the adrenaline into my bloodstream.</p>

<p>I spent the next week with my family in Saudi Arabia. To me, Saudi Arabia is one of the best places to study. When I am Saudi Arabia, especially in summer when none of my friends are there, I get bored. Boredom ignites creativity. When I sit home bored and lazy, I realize that I can spend my time doing something better than lying at the sofa. Eventually, I find myself at <a href="http://www.edx.org">EdX</a> scrolling through the classes.</p>

<p>The next couple of weeks, I spent them in Lebanon. Saudi Arabia has the best learning environment. Lebanon has the worst. Internet is always slow. You do not know when will the electricity go off. Motorcycles, cars, and people are all cheering for their favorite World Cup teams at the top of their voices. The upbeat lifestyle is fun right after leaving the quiet KSA and USA, but it is definitely not my study environment.</p>

<p>After the fun and war excitement of Lebanon, I went back to Saudi Arabia for a week and then came back to the United States.</p>

<p>In the United States, I worked full-time at <a href="http://www.brainjocks.com">BrainJocks</a> for the next 6 weeks. In these weeks, I learned more about building complex digital systems than I had ever learned in school. Test-Driven Development, Unit Testing, Dependency Injection, Inversion of Control, and ASP.NET MVC are just a little of what I learned about.</p>

<p>The professor is here now. I need to stop typing and focus on lecture. Oh, actually she is playing some techno before lecture. This semester is gonna be amazing!</p>
</div>
  </div>
  

  
  <div class='post'>
    <span class='date'>31 Jul 2014</span>
    <h1><a href='/blog/web/mobile/twilio/parse/2014/07/31/VerifyPhoneNumbersTwilioAndParse.html'>How to verify phone numbers using Twilio and Parse</a></h1>
    <div class='body'><p>Do you want to create an app that relies on a user&#39;s phone number to function? If so, you have probably heard about <a href="https://www.twilio.com/">Twilio</a>. Twilio provides an API for developers to send and receive text messages as well as calls. On the other hand, <a href="https://parse.com/">Parse</a> has gained much popularity as a mobile app backend. Using Twilio along with Parse, you can verify your users&#39; phone numbers and store them in a database using fewer than 35 lines of server-side code. Sounds too good to be true, doesn&#39;t it? Let&#39;s get started.</p>

<h2>Parse Cloud Functions</h2>

<p>We need to store the code that communicates with Twilio somewhere on the server. This code is placed in what Parse calls <a href="https://www.parse.com/docs/cloud_code_guide">Cloud Functions</a>. Simply, Cloud Functions are functions that run on the server. However, they are triggered by the clients, which makes them act as API endpoints. For our purposes, we need to define two Cloud Functions: one to send the verification code to the user and one to verify the user&#39;s number.</p>

<h2>Creating Your First Cloud Function</h2>

<p>To start developing Cloud Functions, you must first have Parse&#39;s Command Line Tool installed on your machine. Since Parse did a great job in explaining this process, I will not repeat it here. If you have never written a Cloud Function before, please follow the Getting Started section of the <a href="https://parse.com/docs/cloud_code_guide">Parse Cloud Code Guide</a>.</p>

<h2>Send Verification Code</h2>

<p>The first Cloud Function that we need to write is the one that send the verification code to the user&#39;s phone. Luckily, Parse comes with bundled with a <a href="https://www.parse.com/docs/cloud_modules_guide#twilio">Twilio Cloud Module</a>. In other words, you do not need to install a Twilio client for your Parse function. All you need to do is import it. To import it, put the following line at the top of your main.js file, replacing <Your Twilio Account Sid> and <Your Twilio Auth Token> with their respective values from your Twilio dashboard.</p>

<div class="highlight"><pre><code class="js"><span class="kd">var</span> <span class="nx">twilio</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;twilio&#39;</span><span class="p">)(</span><span class="s1">&#39;&lt;Your Twilio Account Sid&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;Your Twilio Auth Token&gt;&#39;</span><span class="p">);</span></code></pre></div>

<p>Now, you have all you need to define your verfication code cloud function. I will call this function sendVerificationCode, but you can have any name that you like. The function is defined as follows:</p>

<div class="highlight"><pre><code class="js"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;sendVerificationCode&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">verificationCode</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">999999</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
    <span class="nx">user</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;phoneVerificationCode&quot;</span><span class="p">,</span> <span class="nx">verificationCode</span><span class="p">);</span>
    <span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
    
    <span class="nx">twilio</span><span class="p">.</span><span class="nx">sendSms</span><span class="p">({</span>
        <span class="nx">From</span><span class="o">:</span> <span class="s2">&quot;&lt;Your Twilio phone number&gt;&quot;</span><span class="p">,</span>
        <span class="nx">To</span><span class="o">:</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">phoneNumber</span><span class="p">,</span>
        <span class="nx">Body</span><span class="o">:</span> <span class="s2">&quot;Your verification code is &quot;</span> <span class="o">+</span> <span class="nx">verificationCode</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">responseData</span><span class="p">)</span> <span class="p">{</span> 
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> 
          <span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">});</span></code></pre></div>

<p>This function accepts the phone number as a parameter, as seen in request.params.phoneNumber. It generates a verification code and stores it in the user&#39;s record. Then, it sends that code to the user via Twilio.</p>

<h2>Verify Phone Number</h2>

<p>The second Cloud Function that we need to define is the one that verifies the user&#39;s phone number and stores it in the database. I will call this function verifyPhoneNumber, and it will take the phone number and the verification code as parameters. It is defined as follows:</p>

<div class="highlight"><pre><code class="js"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;verifyPhoneNumber&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">verificationCode</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;phoneVerificationCode&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">verificationCode</span> <span class="o">==</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">phoneVerificationCode</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">user</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;phoneNumber&quot;</span><span class="p">,</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">phoneNumber</span><span class="p">);</span>
        <span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
        <span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;Invalid verification code.&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span></code></pre></div>

<p>As you can see, this function first checks if the verification code that the user sends matches that which was saved in the database. If it is, it sets the user&#39;s phone number to the number that the user included in his request.</p>

<h2>Deploying the Cloud Functions</h2>

<p>At this point, you are done with your server-side logic. Go ahead and save the main.js file. Then, use the command line to go to the root directory of your cloud code. When you are there, run the following command to push your code to Parse:</p>

<div class="highlight"><pre><code class="js"><span class="nx">parse</span> <span class="nx">deploy</span></code></pre></div>

<h2>Next Steps</h2>

<p>Now that your backend is ready to roll, it is time to connect your client-side. With Parse&#39;s SDK, all you need to do is use the Call Cloud Function command. This differs from platform to platform, so refer to the Parse documentation to find the command for calling a Cloud Function from your client app.</p>

<p>Of course, this is not the best solution to verify phone numbers. It has some drawbacks, such as the user using a different phone number in the verification step. This tutorial is meant to demonstrate how Twilio and Parse can be used together. Now, it is time to use your head and come up with a better and more secure solution. Have fun coding.</p>
</div>
  </div>
  

  
  <div class='post'>
    <span class='date'>20 Jul 2014</span>
    <h1><a href='/blog/web/nodejs/express/2014/07/20/ExpressMultipleSites.html'>How to host multiple websites using Express.js</a></h1>
    <div class='body'><p>Hosting multiple websites using NodeJS and Express is made very simple using Express&#39;s <a href="https://github.com/expressjs/vhost">virtual hosts</a>. Using virtual hosts, you do not need to worry about using a reverse proxy to forward your visitors to different ports. Simply, a virtual host is an Express app tied to a domain name. What does that mean in code? Let&#39;s see!</p>

<h2>Our Workspace</h2>

<p>For demonstration, let us assume that we own two domain names: potato.com and tomato.com. We want www.potato.com to direct to the potato website, which is located in a directory named potato, and we want www.tomato.com to direct to the tomato website, which is located in a directory named tomato. For simplicity&#39;s sake, both websites are static websites.</p>

<h2>Creating a Virtual Host</h2>

<p>As I mentioned earlier, a virtual host is an Express app. This is not entirely true. A virtual host wraps up an application into a middleware. After it is wrapped up, we can use it in our main application. The code below shows how to create a virtual host (or vhost).</p>

<div class="highlight"><pre><code class="js"><span class="kd">function</span> <span class="nx">createVirtualHost</span><span class="p">(</span><span class="nx">domainName</span><span class="p">,</span> <span class="nx">dirPath</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">vhost</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
    <span class="c1">//parses request body and populates request.body</span>
    <span class="nx">vhost</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span> <span class="nx">express</span><span class="p">.</span><span class="nx">bodyParser</span><span class="p">()</span> <span class="p">);</span>
    <span class="c1">//checks request.body for HTTP method overrides</span>
    <span class="nx">vhost</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span> <span class="nx">express</span><span class="p">.</span><span class="nx">methodOverride</span><span class="p">()</span> <span class="p">);</span>
    <span class="c1">//Where to serve static content</span>
    <span class="nx">vhost</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span> <span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span> <span class="nx">dirPath</span> <span class="p">)</span> <span class="p">);</span>
    <span class="c1">//Show errors</span>
    <span class="nx">vhost</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span> <span class="nx">express</span><span class="p">.</span><span class="nx">errorHandler</span><span class="p">({</span> <span class="nx">dumpExceptions</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">showStack</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}));</span>

    <span class="k">return</span> <span class="nx">express</span><span class="p">.</span><span class="nx">vhost</span><span class="p">(</span><span class="nx">domainName</span><span class="p">,</span> <span class="nx">vhost</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>

<p>For our potato and tomato app, we will need to create two virtual hosts as follows:</p>

<div class="highlight"><pre><code class="js"><span class="kd">var</span> <span class="nx">potatoHost</span> <span class="o">=</span> <span class="nx">createVirtualHost</span><span class="p">(</span><span class="s2">&quot;www.potato.com&quot;</span><span class="p">,</span> <span class="s2">&quot;potato&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">tomatoHost</span> <span class="o">=</span> <span class="nx">createVirtualHost</span><span class="p">(</span><span class="s2">&quot;www.tomato.com&quot;</span><span class="p">,</span> <span class="s2">&quot;tomato&quot;</span><span class="p">);</span></code></pre></div>

<h2>Using the Virtual Hosts</h2>

<p>Using the virtual hosts is as simple as using any piece of middleware. All we have to do is pass them to app.use:</p>

<div class="highlight"><pre><code class="js"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">potatoHost</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">tomatoHost</span><span class="p">);</span></code></pre></div>

<h2>The Full Server Code</h2>

<div class="highlight"><pre><code class="js"><span class="c1">// Module dependencies.</span>
<span class="kd">var</span> <span class="nx">application_root</span> <span class="o">=</span> <span class="nx">__dirname</span><span class="p">,</span>
    <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span> <span class="s1">&#39;express&#39;</span> <span class="p">);</span>

<span class="kd">function</span> <span class="nx">createVirtualHost</span><span class="p">(</span><span class="nx">domainName</span><span class="p">,</span> <span class="nx">dirPath</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">vhost</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
    <span class="c1">//parses request body and populates request.body</span>
    <span class="nx">vhost</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span> <span class="nx">express</span><span class="p">.</span><span class="nx">bodyParser</span><span class="p">()</span> <span class="p">);</span>
    <span class="c1">//checks request.body for HTTP method overrides</span>
    <span class="nx">vhost</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span> <span class="nx">express</span><span class="p">.</span><span class="nx">methodOverride</span><span class="p">()</span> <span class="p">);</span>
    <span class="c1">//Where to serve static content</span>
    <span class="nx">vhost</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span> <span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span> <span class="nx">dirPath</span> <span class="p">)</span> <span class="p">);</span>
    <span class="c1">//Show errors</span>
    <span class="nx">vhost</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span> <span class="nx">express</span><span class="p">.</span><span class="nx">errorHandler</span><span class="p">({</span> <span class="nx">dumpExceptions</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">showStack</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}));</span>

    <span class="k">return</span> <span class="nx">express</span><span class="p">.</span><span class="nx">vhost</span><span class="p">(</span><span class="nx">domainName</span><span class="p">,</span> <span class="nx">vhost</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//Create server</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">//Create the virtual hosts</span>
<span class="kd">var</span> <span class="nx">potatoHost</span> <span class="o">=</span> <span class="nx">createVirtualHost</span><span class="p">(</span><span class="s2">&quot;www.potato.com&quot;</span><span class="p">,</span> <span class="s2">&quot;potato&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">tomatoHost</span> <span class="o">=</span> <span class="nx">createVirtualHost</span><span class="p">(</span><span class="s2">&quot;www.tomato.com&quot;</span><span class="p">,</span> <span class="s2">&quot;tomato&quot;</span><span class="p">);</span>

<span class="c1">//Use the virtual hosts</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">potatoHost</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">tomatoHost</span><span class="p">);</span>

<span class="c1">//Start server</span>
<span class="kd">var</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">80</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span> <span class="nx">port</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">&#39;Express server listening on port %d in %s mode&#39;</span><span class="p">,</span> <span class="nx">port</span><span class="p">,</span> <span class="nx">app</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">env</span> <span class="p">);</span>
<span class="p">});</span></code></pre></div>

<h2>Testing the Server</h2>

<p>In order to see the server work, we must own both domain names and set their addresses to that of our server. Since we do not own the domain names and the process is arduous, we will modify the hosts file to make those domain names point to our local machine.</p>

<p>On Windows, the hosts file can be found in c:\windows\system32\drivers\etc</p>

<p>On Mac or Linux, the hosts file can be found in /etc</p>

<p>The hosts file may be hidden on some systems. If you do not see it in the directory, make sure that you enable viewing hidden files from your folder options or control panel.</p>

<p>Open the hosts file, add the following lines of code to the bottom of the file, and save it.</p>

<div class="highlight"><pre><code class="sh">127.0.0.1 www.potato.com
127.0.0.1 www.tomato.com</code></pre></div>

<p>Now, run your NodeJS application and navigate to www.potato.com and www.tomato.com from any browser. Voila! You should now be directed to the potato website and the tomato website respectively. Give yourself a pat on the back and have some chicken alfredo with a potato and a tomato on the side.</p>
</div>
  </div>
  

  
    
    <h3>Older Posts</h3>
    <table class='post-list'>
    
    <tr>
      <th><a href='/blog/web/2014/06/26/NodeRestAPITutorial.html'>How to build a scalable REST API using Node.JS and Express</a></th>
      <td>26 Jun 2014</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/life/2014/05/28/InterningAtBrainJocks.html'>My Internship at BrainJocks</a></th>
      <td>28 May 2014</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/web/2014/04/06/Unvalidated-Redirects.html'>Web Security: Unvalidated Redirects</a></th>
      <td>06 Apr 2014</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/programming/2014/03/16/AssessYourCollaborativeProgramming.html'>Assess your Collaborative Programming Skills</a></th>
      <td>16 Mar 2014</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/web/2014/02/24/WebPerformanceTrends.html'>Web Performance Trends: One Load, That's All</a></th>
      <td>24 Feb 2014</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/opinion/2014/02/09/WhyYouShouldHaveACloudVM.html'>Why You should have a Virtual Machine in the Cloud</a></th>
      <td>09 Feb 2014</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/opinion/2014/01/12/CompScieOrSoftEngineer.html'>Computer Science VS Software Engineering</a></th>
      <td>12 Jan 2014</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/web/2013/12/28/MakeABlogSocial.html'>Make a Blog Social (Without a Database)</a></th>
      <td>28 Dec 2013</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/sci-fi/2013/12/26/WhatIfCarsHadAPIs.html'>What if Cars had APIs</a></th>
      <td>26 Dec 2013</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/blogging/2013/12/24/MovingToJekyll.html'>Moving the Blog to Jekyll</a></th>
      <td>24 Dec 2013</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/android/2012/09/10/KSUBarbecue.html'>Kennesaw State University Student Barbecue</a></th>
      <td>10 Sep 2012</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/android/2012/05/14/DiclopediaOneMonth.html'>Diclopedia is 1 Month Old</a></th>
      <td>14 May 2012</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/android/2012/04/20/DiclopediaStatistics.html'>Diclopedia Statistics: First Week</a></th>
      <td>20 Apr 2012</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/android/2012/04/13/Diclopedia.html'>Beginning Android App Development</a></th>
      <td>13 Apr 2012</td>
    </tr>
  

  
    
    <tr>
      <th><a href='/blog/android/2012/03/21/BeginningAppDev.html'>Beginning Android App Development</a></th>
      <td>21 Mar 2012</td>
    </tr>
  

</table>
            </div>
            
              <div class="col-md-3">
                <!-- Begin MailChimp Signup Form -->
<div id="mc_embed_signup">
	<form action="http://shamadeh.us3.list-manage1.com/subscribe/post?u=35a9df285ba128b01ee2552f6&amp;id=b98478fb0b" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
		<h2>Subscribe</h2>
	<div class="mc-field-group">
		<label for="mce-NAME">Full Name </label>
		<input type="text" value="" name="NAME" class="required" id="mce-NAME">
	</div>
	<div class="mc-field-group">
		<label for="mce-EMAIL">Email Address </label>
		<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
	</div>
		<div id="mce-responses" class="clear">
			<div class="response" id="mce-error-response" style="display:none"></div>
			<div class="response" id="mce-success-response" style="display:none"></div>
		</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
	    <div style="position: absolute; left: -5000px;"><input type="text" name="b_35a9df285ba128b01ee2552f6_b98478fb0b" value=""></div>
		<div class="clear"><input type="submit" style="background-color: #336699" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
	</form>
</div>
<!--End mc_embed_signup-->
              </div>
            
          </div>
          
        </div>

        <div id="footer">
  <div class="container">
    <p class="text-center">Proudly hosted by Github Pages</p>
  </div>
</div>

        <script src="/bootstrap/js/bootstrap.min.js"></script>

        
          <!-- Mailchimp -->
          <script src="/js/mailchimp.js"></script>
        

        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-46641204-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
      </div>
    </body>
</html>
